# 동영상 입출력

```python
import cv2

video_file = "../cv_images/video.mp4"

cap = cv2.VideoCapture(video_file)      #  video_file의 첫 프레임을 읽어 동영상 캡쳐 객체 생성

if cap.isOpened():                      # 캡쳐 객체 초기화 확인
    while True:
        ret, img = cap.read()          # 다음 프레임 읽기      
        if ret:                        # 프레임 읽기 정상
            resized_img = cv2.resize(img, dsize=None, fx=0.5,fy=0.5) # 프레임 크기 조정
            cv2.imshow(video_file, img) # 화면에 표시
            cv2.waitKey(10)             # 25ms 지연(40fps로 가정)  
        else:                          # 다음 프레임 읽을 수 없슴,
            break                      # 재생 완료
else:

    print("can't open video.")          # 캡쳐 객체 초기화 실패
    
cap.release()                  # 자원 해제
cv2.destroyAllWindows()        # 모든 창 닫기
```
- index = 0 시스템 기본 카메라
   - 카메라가 열렸는지 확인  
	    if not cap.isOpened():      
	        print("Camera open failed!") # 열리지 않았으면 문자열 출력  
	        sys.exit()
    - ret, frame = cap.read() # 두 개의 값을 반환하므로 두 변수 지정  
    - return value -true/false    
	    if not ret: # 새로운 프레임을 못받아 왔을 때 braek  
	        break
# 도형그리기

### 빈 스케치북 만들기

- 크기와 초깃값으로 생성        
	Numpy 배열을 생성할 때 사용할 값을 가지고 있지 않은 경우가 많기 때문에 초기 값을 지정해서 생성하는 방법을 사용

    - `numpy.empty(shape [, dtype]) : 초기화되지 않는 값(쓰레기 값)으로 배열 생성

    - `numpy.zeros(shape [,dtype]) : 0으로 초기화된 배열 생성

    - `numpy.ones(shape [,dtype]) : 1로 초기화된 배열 생성

    - `numpy.full(shape, fill_value [,dtype]) : fill_value로 초기화된 배열 생성  

- 시퀀스와 난수로 생성
	Numpy 배열을 생성하는 방법 중에는 일정한 범위 내에서 순차적인 값을 갖게하는 방법과 난수로 채우는 방법

    - `numpy.arange([start=0, ] stop [, step=1, dtype = float64]) : 순차적인 값으로 생성
        - `start : 시작 값
        - `stop : 종료 값, 범위에 포함되는 수는 ~ stop -1
        - `step : 증가 값
        - `dtype : 데이터 타입

    - numpy.random.rand(array크기) : 
	    - 0과 1 사이의 무작위 수 생성 array크기를 생략하면 난수 1개 반환, 나머지는 해당 크기만큼 값을 반환
    - numpy.random.randn(array크기) : 표준 정규 분포를 따르는 무작위 수 생성

```python
import cv2
import numpy as np

# 세로 480 x 가로 640 , 3 channel 에 해당하는 스케치북 만들기
img = np.zeros((480, 640, 3), dtype=np.uint8)
```

```python
import cv2
import numpy as np

# 세로 480 x 가로 640 , 3 channel 에 해당하는 스케치북 만들기

img = np.zeros((480, 640, 3), dtype=np.uint8)                           # 현재 0 으로 채워져서 검정색
#img[:] = (255, 255, 255)  # 전체 공간을 흰색으로 채우기 - opencv BGR
#img[:] = (255, 0, 0)      # 전체 공간을 파란색으로 채우기
img[:] = (0, 0, 255)      # 전체 공간을 빨간색으로 채우기

cv2.imshow('img', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```
### 일부 영역 색칠

```python
import cv2
import numpy as np

# 세로 480 x 가로 640 , 3 channel 에 해당하는 스케치북 만들기

img = np.zeros((480, 640, 3), dtype=np.uint8)
img[100:200, 200:300] = ( 0, 0, 255)
img[400:420, 100:150] = ( 255, 0, 255)

# 세로영역, 가로 영역 기준으로 원하는 색을 채움

cv2.imshow('img', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 직선
>[!직선의 종류]
>
	1. cv2.LINE_4 : 상하좌우 4 방향으로 연결된 선
	2. cv2.LINE_8 : 대각선을 포함한 8방향으로 연결된 선(기본값)
	3. cv2.LINE_AA : 부드러운 선 (anit-aliasing)
```python
import cv2
import numpy as np

img = np.zeros((480, 640, 3), dtype=np.uint8)

COLOR = ( 0, 255, 255) # BGR : yellow
THICKNESS = 3 # 두께

cv2.line(img,   (50,100), (400, 50), COLOR, THICKNESS, cv2.LINE_8)
    # 그릴 위치, 시작점, 끝 점, 색깔, 두께, 선 종류
cv2.line(img, (50,200), (400, 150), COLOR, THICKNESS, cv2.LINE_4)
cv2.line(img, (50,300), (400, 250), COLOR, THICKNESS, cv2.LINE_AA)

cv2.imshow('img', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 원
```python
import cv2
import numpy as np

img = np.zeros((480, 640, 3), dtype=np.uint8)

COLOR = (255, 255, 0) # BGR : 옥색
RADIUS = 50       # 반지름
THICKNESS = 10    # 두께

cv2.circle(img, (200,100), RADIUS, COLOR, THICKNESS, cv2.LINE_AA)  # 속이 빈 원
# 그릴 위치, 원의 중심점, 반지름 색깔, 두께, 선 종류
cv2.circle(img, (400,100), RADIUS, COLOR, cv2.FILLED, cv2.LINE_AA) # 속이 꽉 찬 원
  
cv2.imshow('img', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 사각형
```python
import cv2
import numpy as np

img = np.zeros((480, 640, 3), dtype=np.uint8)

COLOR = (0, 255, 0) # BGR : 녹색
THICKNESS = 3    # 두께

cv2.rectangle(img, (100,100), (200, 200), COLOR, THICKNESS)  # 속이 빈 사각형
# 그릴 위치 (왼쪽 위 좌표, 오른쪽 아래 좌표), 색깔, 두께
cv2.rectangle(img, (300,100), (400, 300), COLOR, cv2.FILLED)   # 속이 꽉 찬 사각형

cv2.imshow('img', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

### 다각형
```python
import cv2

import numpy as np

  

img = np.zeros((480, 640, 3), dtype=np.uint8)

  

COLOR = (0, 0, 255) # BGR : 빨간색

THICKNESS = 3    # 두께

  

pts1 = np.array([[100, 100],[200,100],[100,200]])

pts2 = np.array([[200, 100],[300,100],[300,200]])

  

# True 는 다각형이 닫힘, False 다각형이 열림

# cv2.polylines(img,[pts1], True, COLOR, THICKNESS, cv2.LINE_AA) # 다각형 값을 리스트에 넣어야함

# cv2.polylines(img,[pts2], True, COLOR, THICKNESS, cv2.LINE_AA) # 다각형 값을 리스트에 넣어야함

  

cv2.polylines(img, [pts1 , pts2], True, COLOR, THICKNESS, cv2.LINE_AA) # 속이 빈 다각형

  

# 그릴위치 , 그릴 좌표, 닫힘 여부, 색깔, 두께, 선 종류

pts3 = np.array([[[100, 300], [200, 300], [100, 400]],[[200, 300], [300, 300], [300, 400]]])

cv2.fillPoly(img, pts3, COLOR, cv2.LINE_AA)

# 그릴 위치, 그릴 좌표들, 색깔, 선 종류

  

cv2.imshow('img', img)

  

cv2.waitKey(0)

cv2.destroyAllWindows()
```